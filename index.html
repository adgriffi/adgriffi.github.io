<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                var nutsUrl = "https://services6.arcgis.com/swIsfiMN39u9wKrT/ArcGIS/rest/services/NUTS/FeatureServer/2/query?where=NUTS0%3D%27DE%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=Date%2CNAME%2CDaily_New%2CTotal_New%2CDaily_Deaths%2CTotal_Deaths%2CDaily_Recovered%2CTotal_Recovered&returnGeometry=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pjson&token=";
                $.getJSON(nutsUrl, function(data) {
                    var $table = $('#nutsCovidNumbers')

                    var sortedData = $(data.features).sort(function(a, b) {
                        var textA = a.attributes.NAME.toLowerCase();
                        var textB = b.attributes.NAME.toLowerCase();

                        if (textA < textB) {
                            return -1;
                        } if (textA > textB) {
                            return 1;
                        }
                        return 0; 
                    });

                    $(sortedData).each(function (index, val) {
                        var $tr = $("<tr></tr>");
                        //var $date = new Date(val.attributes.Date).toISOString().slice(0,10);

                        //$tr.append("<td>" + $date + "</td>");
                        $tr.append("<td>" + val.attributes.NAME + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Daily_New + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Total_New + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Daily_Deaths + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Total_Deaths + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Daily_Recovered + "</td>");
                        $tr.append("<td style='text-align:right'>" + val.attributes.Total_Recovered + "</td>");
                        
                        $table.append($tr);
                    });
                });
            });
        </script>
        <style type="text/css">
            table {
                border: 1px solid;
                border-collapse: collapse;
            }
            tr:nth-child(even) {background: #E8E8E8}
            th {
                font-weight: bold;
                padding: 3px;
                border: 1px solid;
            }
            td {
                padding: 3px;
                border: 1px solid;
            }

        </style>
    </head>
    <body>
        <table id="nutsCovidNumbers">
            <tr>
                <!--<th>Date</th>-->
                <th>State</th>
                <th>Daily New</th>
                <th>Total New</th>
                <th>Daily Deaths</th>
                <th>Total Deaths</th>
                <th>Daily Recovered</th>
                <th>Total Recovered</th>
            </tr>
        </table>
    </body>
</html>